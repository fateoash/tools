(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{7246:function(e,t,s){Promise.resolve().then(s.bind(s,6341))},6341:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(7437),r=s(2265),i=Object.defineProperty,a=new Map,c=new WeakMap,l=0,o=void 0;r.Component;var d=s(6154),u=s(6020),m=s(4910);function h(){let[e,t]=(0,r.useState)("week"),[s,i]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[p,v]=(0,r.useState)(!0),j=(0,r.useRef)(1),{ref:y,inView:w}=function(){var e;let{threshold:t,delay:s,trackVisibility:n,rootMargin:i,root:d,triggerOnce:u,skip:m,initialInView:h,fallbackInView:f,onChange:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[g,p]=r.useState(null),v=r.useRef(x),[j,y]=r.useState({inView:!!h,entry:void 0});v.current=x,r.useEffect(()=>{let e;if(!m&&g)return e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o;if(void 0===window.IntersectionObserver&&void 0!==n){let r=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof s.threshold?s.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}let{id:r,observer:i,elements:d}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var s;return"".concat(t,"_").concat("root"===t?(s=e.root)?(c.has(s)||(l+=1,c.set(s,l.toString())),c.get(s)):"0":e[t])}).toString(),s=a.get(t);if(!s){let n;let r=new Map,i=new IntersectionObserver(t=>{t.forEach(t=>{var s;let i=t.isIntersecting&&n.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(s=r.get(t.target))||s.forEach(e=>{e(i,t)})})},e);n=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:i,elements:r},a.set(t,s)}return s}(s),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),i.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),i.unobserve(e)),0===d.size&&(i.disconnect(),a.delete(r))}}(g,(t,s)=>{y({inView:t,entry:s}),v.current&&v.current(t,s),s.isIntersecting&&u&&e&&(e(),e=void 0)},{root:d,rootMargin:i,threshold:t,trackVisibility:n,delay:s},f),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,g,d,i,u,m,n,f,s]);let w=null==(e=j.entry)?void 0:e.target,N=r.useRef(void 0);g||!w||u||m||N.current===w||(N.current=w,y({inView:!!h,entry:void 0}));let b=[p,j.inView,j.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}({threshold:0,rootMargin:"100px"}),N=async e=>{try{var t;let s=await fetch("https://api.findlink.top/spu/page?pageNo=".concat(e,"&pageSize=12"),{method:"GET",headers:{Accept:"application/json"}}),n=await s.json();if(n.success&&(null===(t=n.result)||void 0===t?void 0:t.records)){let t=n.result.records.map(e=>({id:e.channelItemNo,title:e.title,price:e.price,imageUrl:e.mainImage.startsWith("//")?"https:".concat(e.mainImage):e.mainImage,views:Math.floor(9e3*Math.random())+1e3,channel:e.channel}));i(s=>1===e?t:[...s,...t]),v(n.result.current<n.result.pages)}else g(n.message||"Failed to load products")}catch(e){console.error("Error fetching products:",e),g("Failed to load products. Please try again later.")}finally{f(!1)}};return(0,r.useEffect)(()=>{j.current=1,i([]),v(!0),f(!0),N(1)},[e]),(0,r.useEffect)(()=>{w&&!h&&p&&(j.current+=1,f(!0),N(j.current))},[w,h,p]),(0,n.jsxs)(d.Z,{children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,n.jsx)(u.Z,{children:"Popular Items"})}),(0,n.jsx)(m.Z,{products:s}),p&&(0,n.jsx)("div",{ref:y,className:"flex justify-center py-8",children:h?(0,n.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading more items..."}):(0,n.jsx)("div",{className:"h-10"})}),!p&&s.length>0&&(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No more items to load"}),x&&(0,n.jsx)("div",{className:"text-center py-8 text-red-500",children:x})]})}},4910:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(7437),r=s(3145),i=s(7648);let a=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function c(e){let{children:t,className:s=""}=e;return(0,n.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow ".concat(s),children:t})}function l(e){let{id:t,title:s,price:l,imageUrl:o,views:d,channel:u}=e;return(0,n.jsx)(i.default,{href:"/item/".concat(t,"?channel=").concat(u||"weidian"),className:"block w-full group",children:(0,n.jsxs)(c,{className:"w-full sm:max-w-[280px] mx-auto",children:[(0,n.jsx)("div",{className:"relative aspect-square",children:(0,n.jsx)(r.default,{src:o,alt:s,fill:!0,className:"object-cover rounded-t-lg"})}),(0,n.jsxs)("div",{className:"p-2.5 sm:p-4",children:[(0,n.jsx)("h3",{className:"text-xs sm:text-sm font-medium line-clamp-2 mb-1.5 sm:mb-2 group-hover:text-orange-500 transition-colors",children:s}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"text-base sm:text-lg font-medium",children:[(0,n.jsx)("span",{className:"text-xs sm:text-sm font-normal",children:"\xa5"}),l]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,n.jsx)(a,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,n.jsx)("span",{className:"text-xs sm:text-sm",children:d})]})]})]})]})})}function o(e){let{products:t,children:s,className:r=""}=e;return(0,n.jsxs)("div",{className:"\n      grid auto-cols-fr gap-3\n      grid-cols-[repeat(auto-fit,minmax(160px,1fr))]\n      sm:grid-cols-2 sm:gap-4\n      lg:grid-cols-3 lg:gap-6 \n      xl:grid-cols-4\n      ".concat(r,"\n    "),children:[t.map(e=>(0,n.jsx)(l,{...e},e.id)),s]})}},6154:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(7437);function r(e){let{children:t,className:s=""}=e;return(0,n.jsx)("div",{className:"container mx-auto px-4 py-8 ".concat(s),children:t})}},6020:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(7437);function r(e){let{children:t,className:s=""}=e;return(0,n.jsx)("h1",{className:"text-2xl font-medium mb-8 ".concat(s),children:t})}}},function(e){e.O(0,[847,648,971,117,744],function(){return e(e.s=7246)}),_N_E=e.O()}]);